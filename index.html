<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‹—ç‹—å½±ç‰‡æ‡¸åŠç‰©å“æ¸…å–® - è£½ä½œé€²åº¦è¿½è¹¤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #ff9a56 0%, #ff6b9d 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .stats {
            background: #f8f9fa;
            padding: 20px 30px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: bold;
        }

        .stat-number {
            background: #28a745;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 1.1em;
        }

        .search-box {
            padding: 20px 30px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .search-input {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid #ddd;
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            transition: border-color 0.3s;
        }

        .search-input:focus {
            border-color: #28a745;
        }

        .items-container {
            padding: 30px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
        }

        .item-group {
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .item-group:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .group-header {
            background: linear-gradient(135deg, #ffeaa7, #fab1a0);
            color: #2d3436;
            padding: 15px 20px;
            font-weight: bold;
            font-size: 1.2em;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.5);
        }

        .item-list {
            padding: 20px;
        }

        .item-entry {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
            transition: background-color 0.2s;
        }

        .item-entry:last-child {
            border-bottom: none;
        }

        .item-entry:hover {
            background-color: #f8f9fa;
        }

        .item-checkbox {
            width: 18px;
            height: 18px;
            margin-right: 15px;
            cursor: pointer;
            accent-color: #28a745;
        }

        .item-name {
            flex: 1;
            font-size: 1.05em;
            cursor: pointer;
        }

        .item-entry.completed {
            background-color: #d4edda;
            opacity: 0.8;
        }

        .item-entry.completed .item-name {
            text-decoration: line-through;
            color: #6c757d;
        }

        .clear-all {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #dc3545;
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 50px;
            font-size: 16px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.3);
            transition: all 0.3s;
        }

        .clear-all:hover {
            background: #c82333;
            transform: scale(1.05);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .items-container {
                grid-template-columns: 1fr;
                padding: 20px;
            }
            
            .stats {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¬ ç‹—ç‹—å½±ç‰‡æ‡¸åŠç‰©å“æ¸…å–®</h1>
            <p>è¿½è¹¤æ‚¨çš„å‰µæ„æ‡¸åŠç‰©å“è£½ä½œé€²åº¦</p>
        </div>

        <div class="stats">
            <div class="stat-item">
                <span>ç¸½ç‰©å“æ•¸ï¼š</span>
                <span class="stat-number" id="totalCount">0</span>
            </div>
            <div class="stat-item">
                <span>å·²æ‹æ”ï¼š</span>
                <span class="stat-number" id="completedCount">0</span>
            </div>
            <div class="stat-item">
                <span>å®Œæˆç‡ï¼š</span>
                <span class="stat-number" id="progressPercent">0%</span>
            </div>
        </div>

        <div class="search-box">
            <input type="text" class="search-input" id="searchInput" placeholder="ğŸ” æœå°‹æ‡¸åŠç‰©å“...">
        </div>

        <div class="items-container" id="itemsContainer">
            <!-- æ‡¸åŠç‰©å“å°‡ç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
        </div>
    </div>

    <button class="clear-all" onclick="clearAllChecks()">æ¸…é™¤æ‰€æœ‰å‹¾é¸</button>

    <script>
        const hangingItems = {
            "ç¾é£Ÿé¡ (Food Items)": [
                "ç²‰è‰²ç”œç”œåœˆ (Pink Donut)",
                "è¿·ä½ æ¼¢å ¡ (Mini Burger)",
                "å·¨å¤§æ£‰èŠ±ç³– (Giant Marshmallow)",
                "å½©è™¹ç”œç”œåœˆ (Rainbow Donut)",
                "è¿·ä½ æŠ«è–©ç‰‡ (Mini Pizza Slice)",
                "å·§å…‹åŠ›é¤…ä¹¾ (Chocolate Cookie)",
                "å½©è‰²æ£’æ£’ç³– (Colorful Lollipop)",
                "è¿·ä½ è›‹ç³• (Mini Cake)",
                "ç†±ç‹— (Hot Dog)",
                "çˆ†ç±³èŠ±ä¸² (Popcorn String)",
                "å½©è‰²å†°æ·‡æ·‹ç”œç­’ (Colorful Ice Cream Cone)",
                "è¿·ä½ é¬†é¤… (Mini Waffle)",
                "å½©è™¹ç³–æœ (Rainbow Candy)",
                "å·¨å¤§è»Ÿç³–ç†Š (Giant Gummy Bear)",
                "è¿·ä½ ç”œç”œåœˆå¡” (Mini Donut Tower)",
                "å¤§å¡Šéª¨é ­ (Large Bone)",
                "å½©è‰²é¦¬å¡é¾ (Colorful Macaron)",
                "è¿·ä½ ç”œç”œåœˆ (Mini Donut)",
                "å·§å…‹åŠ›æ£’ (Chocolate Bar)",
                "æ°´æœä¸² (Fruit Skewer)"
            ],
            "ç©å…·é¡ (Toys)": [
                "æ¯›çµ¨ç©å…·è€é¼  (Plush Toy Mouse)",
                "å½©è‰²ç¾½æ¯›çƒ (Colorful Shuttlecock)",
                "è¿·ä½ é¢¨è»Š (Mini Pinwheel)",
                "å½©è™¹é¢¨éˆ´ (Rainbow Wind Chime)",
                "å°æ©¡çš®é´¨ (Small Rubber Duck)",
                "è¿·ä½ é£›æ©Ÿ (Mini Airplane)",
                "å½©è‰²æ°£çƒæŸ (Colorful Balloon Bunch)",
                "æ¯›çµ¨ç¨è§’ç¸ (Plush Unicorn)",
                "è¿·ä½ è¶³çƒ (Mini Soccer Ball)",
                "å½©è™¹å½ˆç°§ç©å…· (Rainbow Spring Toy)",
                "å°å‹é­”è¡“æ–¹å¡Š (Small Rubik's Cube)",
                "è¿·ä½ æ–æ– (Mini Yoyo)",
                "å½©è‰²æºœæºœçƒ (Colorful Yo-Yo)",
                "æ¯›çµ¨é¦™è•‰ (Plush Banana)",
                "è¿·ä½ æ¨‚é«˜ç©æœ¨ (Mini Lego Bricks)",
                "å½©è‰²é£›ç›¤ (Colorful Frisbee)",
                "æ¯›çµ¨å°ç†Š (Plush Bear)",
                "è¿·ä½ é™€èº (Mini Spinning Top)",
                "å½©è™¹æ‹¼åœ–å¡Š (Rainbow Puzzle Piece)",
                "å°å‹ç©æœ¨ (Small Building Block)"
            ],
            "æ—¥å¸¸ç”¨å“é¡ (Daily Necessities)": [
                "å½©è‰²è¥ªå­ (Colorful Socks)",
                "è¿·ä½ é›¨å‚˜ (Mini Umbrella)",
                "å°å‹é¬§é˜ (Small Alarm Clock)",
                "å½©è™¹æ¯›å·¾ (Rainbow Towel)",
                "è¿·ä½ æ‹–é‹ (Mini Slipper)",
                "å°å¸½å­ (Small Hat)",
                "å½©è‰²çœ¼é¡ (Colorful Glasses)",
                "è¿·ä½ æ‰‹æåŒ… (Mini Handbag)",
                "å°å‹ç›¸æ©Ÿ (Small Camera)",
                "å½©è™¹åœå·¾ (Rainbow Scarf)",
                "è¿·ä½ é›»è©± (Mini Phone)",
                "å°å‹ç‡ˆæ³¡ (Small Light Bulb)",
                "å½©è‰²æ‰‹å¥— (Colorful Gloves)",
                "è¿·ä½ é‘°åŒ™åœˆ (Mini Keychain)",
                "å°å‹è¨ˆç®—æ©Ÿ (Small Calculator)",
                "å½©è‰²ç‰™åˆ· (Colorful Toothbrush)",
                "è¿·ä½ æ¯å­ (Mini Cup)",
                "å°å‹é¡å­ (Small Mirror)",
                "å½©è™¹ç­† (Rainbow Pen)",
                "è¿·ä½ æ›¸æœ¬ (Mini Book)"
            ],
            "å¥‡å¹»å‰µæ„é¡ (Fantasy & Creative)": [
                "ç™¼å…‰çš„æ˜Ÿæ˜Ÿ (Glowing Star)",
                "è¿·ä½ é­”æ³•æ£’ (Mini Magic Wand)",
                "å½©è™¹ç¾½æ¯› (Rainbow Feather)",
                "é–ƒäº®æ°´æ™¶çƒ (Sparkling Crystal Ball)",
                "å°å‹å¯¶è—ç®± (Small Treasure Chest)",
                "è¿·ä½ åŸå ¡ (Mini Castle)",
                "å½©è‰²è´è¶ (Colorful Butterfly)",
                "ç™¼å…‰æœˆäº® (Glowing Moon)",
                "å°å‹ç«ç®­ (Small Rocket)",
                "å½©è™¹é›²æœµ (Rainbow Cloud)",
                "è¿·ä½ å¤–æ˜Ÿäºº (Mini Alien)",
                "é–ƒäº®çš‡å†  (Sparkling Crown)",
                "å°å‹é­”æ³•æ›¸ (Small Spellbook)",
                "å½©è‰²ç¨è§’ç¸è§’ (Colorful Unicorn Horn)",
                "è¿·ä½ æ™‚å…‰æ©Ÿ (Mini Time Machine)",
                "ç™¼å…‰å¯¶çŸ³ (Glowing Gemstone)",
                "å½©è™¹é­”æ³•å¸½ (Rainbow Wizard Hat)",
                "è¿·ä½ é¾è›‹ (Mini Dragon Egg)",
                "å°å‹é­”æ³•ç“¶ (Small Potion Bottle)",
                "é–ƒäº®ä»™å¥³æ£’ (Sparkling Fairy Wand)"
            ],
            "å‹•ç‰©å½¢ç‹€é¡ (Animal Shapes)": [
                "æ¯›çµ¨å°è²“ (Plush Kitten)",
                "å½©è‰²å°é³¥ (Colorful Bird)",
                "è¿·ä½ å¤§è±¡ (Mini Elephant)",
                "å°å‹é•·é ¸é¹¿ (Small Giraffe)",
                "å½©è™¹é­š (Rainbow Fish)",
                "æ¯›çµ¨ç†Šè²“ (Plush Panda)",
                "è¿·ä½ ä¼éµ (Mini Penguin)",
                "å°å‹ç…å­ (Small Lion)",
                "å½©è‰²è¸ç‰› (Colorful Snail)",
                "æ¯›çµ¨å…”å­ (Plush Rabbit)",
                "è¿·ä½ æé¾ (Mini Dinosaur)",
                "å°å‹ç« é­š (Small Octopus)",
                "å½©è™¹èœ˜è›› (Rainbow Spider)",
                "æ¯›çµ¨æµ·è±š (Plush Dolphin)",
                "è¿·ä½ ç«çƒˆé³¥ (Mini Flamingo)",
                "å½©è‰²æ¾é¼  (Colorful Squirrel)",
                "å°å‹è€è™ (Small Tiger)",
                "æ¯›çµ¨ç‹ç‹¸ (Plush Fox)",
                "è¿·ä½ çŒ´å­ (Mini Monkey)",
                "å½©è™¹è›‡ (Rainbow Snake)"
            ],
            "éŸ³æ¨‚ä¸»é¡Œé¡ (Music Theme)": [
                "è¿·ä½ å‰ä»– (Mini Guitar)",
                "å°å‹é¼“ (Small Drum)",
                "å½©è‰²éˆ´éº (Colorful Bell)",
                "è¿·ä½ é‹¼ç´éµ (Mini Piano Key)",
                "å°å‹è–©å…‹æ–¯é¢¨ (Small Saxophone)",
                "å½©è™¹å£ç´ (Rainbow Harmonica)",
                "è¿·ä½ å°æç´ (Mini Violin)",
                "å°å‹å–‡å­ (Small Trumpet)",
                "å½©è‰²æœ¨é­š (Colorful Wooden Fish)",
                "è¿·ä½ æ‰‹é¢¨ç´ (Mini Accordion)",
                "å°å‹è±ç´ (Small Harp)",
                "å½©è‰²éŸ¿æ¿ (Colorful Castanet)",
                "è¿·ä½ é•·ç¬› (Mini Flute)",
                "å°å‹å¤§è™Ÿ (Small Tuba)",
                "å½©è™¹éŸ³å‰ (Rainbow Tuning Fork)"
            ],
            "é‹å‹•ç”¨å“é¡ (Sports Equipment)": [
                "è¿·ä½ ç±ƒçƒ (Mini Basketball)",
                "å°å‹ç¶²çƒæ‹ (Small Tennis Racket)",
                "å½©è‰²ç¾½æ¯›çƒæ‹ (Colorful Badminton Racket)",
                "è¿·ä½ é«˜çˆ¾å¤«çƒæ¡¿ (Mini Golf Club)",
                "å°å‹æ£’çƒæ‰‹å¥— (Small Baseball Glove)",
                "å½©è™¹å‘¼æ‹‰åœˆ (Rainbow Hula Hoop)",
                "è¿·ä½ æ»‘æ¿ (Mini Skateboard)",
                "å°å‹è·³ç¹© (Small Jump Rope)",
                "å½©è‰²é£›ç›¤ (Colorful Frisbee)",
                "è¿·ä½ ä¿é½¡çƒç“¶ (Mini Bowling Pin)",
                "å°å‹è¶³çƒ (Small Soccer Ball)",
                "å½©è‰²ä¹’ä¹“çƒæ‹ (Colorful Table Tennis Racket)",
                "è¿·ä½ æ’çƒ (Mini Volleyball)",
                "å°å‹æ›²æ£çƒæ¡¿ (Small Hockey Stick)",
                "å½©è™¹æ¸¸æ³³åœˆ (Rainbow Swim Ring)"
            ],
            "ç¯€æ…¶ä¸»é¡Œé¡ (Festive Theme)": [
                "è–èª•è¥ªå­ (Christmas Stocking)",
                "å¾©æ´»ç¯€å½©è›‹ (Easter Egg)",
                "è¬è–ç¯€å—ç“œ (Halloween Pumpkin)",
                "ç”Ÿæ—¥å¸½ (Birthday Hat)",
                "æ–°å¹´é­ç‚® (New Year's Firecracker)",
                "æƒ…äººç¯€æ„›å¿ƒ (Valentine's Day Heart)",
                "è–èª•æ¨¹è£é£¾ (Christmas Tree Ornament)",
                "å½©è‰²æ‹‰ç‚® (Colorful Party Popper)",
                "è¿·ä½ ç¦®ç‰©ç›’ (Mini Gift Box)",
                "ç¯€æ…¶å½©å¸¶ (Festival Ribbon)",
                "è¬è–ç¯€è™è  (Halloween Bat)",
                "å¾©æ´»ç¯€å…”å­ (Easter Bunny)",
                "è–èª•éˆ´éº (Christmas Bell)",
                "æ–°å¹´ç‡ˆç±  (New Year's Lantern)",
                "æƒ…äººç¯€ç«ç‘° (Valentine's Day Rose)"
            ],
            "äº¤é€šå·¥å…·é¡ (Vehicles)": [
                "è¿·ä½ æ±½è»Š (Mini Car)",
                "å°å‹ç›´å‡æ©Ÿ (Small Helicopter)",
                "å½©è‰²è…³è¸è»Š (Colorful Bicycle)",
                "è¿·ä½ ç«è»Š (Mini Train)",
                "å°å‹èˆ¹éš» (Small Boat)",
                "å½©è™¹é£›æ©Ÿ (Rainbow Airplane)",
                "è¿·ä½ æ‘©æ‰˜è»Š (Mini Motorcycle)",
                "å°å‹æ»‘ç¿”æ©Ÿ (Small Glider)",
                "å½©è‰²é™è½å‚˜ (Colorful Parachute)",
                "è¿·ä½ å¤ªç©ºèˆ¹ (Mini Spaceship)",
                "å°å‹å¡è»Š (Small Truck)",
                "å½©è‰²æ°£çƒ (Colorful Hot Air Balloon)", 
                "è¿·ä½ æ½›æ°´è‰‡ (Mini Submarine)",
                "å°å‹ç†±æ°£çƒ (Small Hot Air Balloon)",
                "å½©è™¹é¢¨ç® (Rainbow Kite)"
            ],
            "æç¬‘å‰µæ„é¡ (Funny & Quirky)": [
                "å·¨å¤§ç‰™åˆ· (Giant Toothbrush)",
                "è¿·ä½ é¦¬æ¡¶ (Mini Toilet)",
                "å½©è‰²å‡ç‰™ (Colorful Dentures)",
                "å°å‹é¬å­ (Small Mustache)",
                "è¿·ä½ å‡é«® (Mini Wig)",
                "å½©è™¹é¼»å­ (Rainbow Nose)",
                "å°å‹æç¬‘çœ¼é¡ (Small Funny Glasses)",
                "è¿·ä½ å°ä¸‘é‹ (Mini Clown Shoe)",
                "å½©è‰²èˆŒé ­ (Colorful Tongue)",
                "å°å‹æç¬‘å¸½ (Small Funny Hat)",
                "å·¨å¤§çœ¼çƒ (Giant Eyeball)",
                "è¿·ä½ æç¬‘å˜´å”‡ (Mini Funny Lips)",
                "å½©è‰²å‡é¬é¬š (Colorful Fake Beard)",
                "å°å‹æç¬‘æ‰‹ (Small Funny Hand)",
                "è¿·ä½ æç¬‘è…³ (Mini Funny Foot)"
            ],
            "è¶…ç¾å¯¦å‰µæ„é¡ (Surreal & Creative)": [
                "æœƒç™¼å…‰çš„é¦™è•‰ (Glowing Banana)",
                "å½©è™¹æ¼¢å ¡ (Rainbow Burger)",
                "è¿·ä½ å½©è™¹ (Mini Rainbow)",
                "æœƒå‹•çš„çœ¼çƒ (Moving Eyeball)",
                "å½©è‰²é›²æœµ (Colorful Cloud)",
                "è¿·ä½ é¾æ²é¢¨ (Mini Tornado)",
                "é–ƒçˆé‘½çŸ³ (Sparkling Diamond)",
                "å°å‹é–ƒé›» (Small Lightning Bolt)",
                "å½©è™¹æ³¡æ³¡ (Rainbow Bubble)",
                "è¿·ä½ é»‘æ´ (Mini Black Hole)",
                "æœƒå”±æ­Œçš„é­š (Singing Fish)",
                "è·³èˆçš„é¦™è…¸ (Dancing Sausage)",
                "å½©è™¹èµ·å¸ (Rainbow Cheese)",
                "è¿·ä½ é­”æ³•é¡ (Mini Magic Mirror)",
                "æœƒç™¼å…‰çš„è˜‘è‡ (Glowing Mushroom)",
                "å½©è‰²é¾è›‹ (Colorful Dragon Egg)",
                "å°å‹æ™‚é–“è† å›Š (Small Time Capsule)",
                "è¿·ä½ è¨±é¡˜äº• (Mini Wishing Well)",
                "å½©è™¹ç…™ç« (Rainbow Fireworks)"
            ]
        };

        // completedItems å„²å­˜çš„æ˜¯å®Œæ•´çš„é …ç›®å­—ä¸²ï¼Œä¾‹å¦‚ "ç²‰è‰²ç”œç”œåœˆ (Pink Donut)"
        let completedItems = new Set(); 

        function initializeItems() {
            const container = document.getElementById('itemsContainer');
            container.innerHTML = '';

            Object.entries(hangingItems).forEach(([category, items]) => {
                const groupDiv = document.createElement('div');
                groupDiv.className = 'item-group';
                
                const headerDiv = document.createElement('div');
                headerDiv.className = 'group-header';
                // é¡åˆ¥åç¨±å·²åŒ…å«ä¸­è‹±æ–‡ï¼Œç›´æ¥ä½¿ç”¨
                headerDiv.textContent = `${category} (${items.length})`; 
                
                const listDiv = document.createElement('div');
                listDiv.className = 'item-list';
                
                items.forEach(item => {
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'item-entry';
                    
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.className = 'item-checkbox';
                    // å‹¾é¸æ¡†ç‹€æ…‹æ”¹è®Šæ™‚å‘¼å« toggleItem
                    checkbox.addEventListener('change', (e) => toggleItem(item, e.target.checked));
                    
                    const label = document.createElement('span');
                    label.className = 'item-name';
                    label.textContent = item; // é¡¯ç¤ºä¸­è‹±æ–‡åˆä½µçš„é …ç›®åç¨±
                    // é»æ“Šæ–‡å­—æ™‚ä¹Ÿèƒ½è§¸ç™¼å‹¾é¸/å–æ¶ˆå‹¾é¸
                    label.addEventListener('click', () => {
                        checkbox.checked = !checkbox.checked;
                        toggleItem(item, checkbox.checked);
                    });
                    
                    itemDiv.appendChild(checkbox);
                    itemDiv.appendChild(label);
                    listDiv.appendChild(itemDiv);
                });
                
                groupDiv.appendChild(headerDiv);
                groupDiv.appendChild(listDiv);
                container.appendChild(groupDiv);
            });

            // åˆå§‹åŒ–é …ç›®å¾Œæ›´æ–°çµ±è¨ˆæ•¸æ“š
            updateStats();
        }

        function toggleItem(item, isCompleted) {
            // æ ¹æ“šå®Œæ•´çš„é …ç›®åç¨±æ‰¾åˆ°å°æ‡‰çš„ DOM å…ƒç´ 
            const items = document.querySelectorAll('.item-entry .item-name');
            let targetEntry = null;
            
            items.forEach(nameElement => {
                if (nameElement.textContent === item) {
                    targetEntry = nameElement.closest('.item-entry'); // æ‰¾åˆ°è©²é …ç›®çš„çˆ¶å®¹å™¨
                }
            });
            
            if (targetEntry) {
                if (isCompleted) {
                    completedItems.add(item);
                    targetEntry.classList.add('completed');
                } else {
                    completedItems.delete(item);
                    targetEntry.classList.remove('completed');
                }
            }
            
            updateStats();
            saveProgress(); // æ¯æ¬¡å‹¾é¸ç‹€æ…‹æ”¹è®Šæ™‚å„²å­˜é€²åº¦
        }

        function updateStats() {
            const totalCount = Object.values(hangingItems).flat().length;
            const completedCount = completedItems.size;
            const progressPercent = totalCount > 0 ? Math.round((completedCount / totalCount) * 100) : 0;
            
            document.getElementById('totalCount').textContent = totalCount;
            document.getElementById('completedCount').textContent = completedCount;
            document.getElementById('progressPercent').textContent = progressPercent + '%';
        }

        function clearAllChecks() {
            if (confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰å‹¾é¸å—ï¼Ÿ')) {
                completedItems.clear(); // æ¸…ç©º Set
                document.querySelectorAll('.item-checkbox').forEach(checkbox => {
                    checkbox.checked = false; // å–æ¶ˆæ‰€æœ‰å‹¾é¸æ¡†
                });
                document.querySelectorAll('.item-entry').forEach(entry => {
                    entry.classList.remove('completed'); // ç§»é™¤å®Œæˆç‹€æ…‹æ¨£å¼
                });
                updateStats();
                saveProgress(); // å„²å­˜æ¸…ç©ºå¾Œçš„é€²åº¦
            }
        }

        function saveProgress() {
            try {
                // å°‡ Set è½‰æ›ç‚ºé™£åˆ—ï¼Œç„¶å¾Œè½‰æ›ç‚º JSON å­—ä¸²å„²å­˜
                const data = JSON.stringify(Array.from(completedItems));
                // ä½¿ç”¨ localStorage é€²è¡ŒæŒä¹…åŒ–å„²å­˜
                localStorage.setItem('hangingItemsProgress', data); 
                console.log('é€²åº¦å·²å„²å­˜åˆ° localStorage:', completedItems.size, 'é …ç›®');
            } catch (error) {
                console.error('ç„¡æ³•å„²å­˜é€²åº¦åˆ° localStorage:', error);
            }
        }

        function loadProgress() {
            try {
                // å¾ localStorage è®€å–å„²å­˜çš„ JSON å­—ä¸²
                const saved = localStorage.getItem('hangingItemsProgress');
                if (saved) {
                    // å°‡ JSON å­—ä¸²è§£æå›é™£åˆ—ï¼Œç„¶å¾Œè½‰æ›ç‚º Set
                    const savedItems = JSON.parse(saved);
                    completedItems = new Set(savedItems);
                    console.log('å·²å¾ localStorage è¼‰å…¥å„²å­˜çš„é€²åº¦:', savedItems.length, 'é …ç›®');
                    
                    // ç‚ºäº†ç¢ºä¿ DOM å…ƒç´ å·²ç¶“æ¸²æŸ“å®Œæˆï¼Œç¨å¾®å»¶é²å†æ‡‰ç”¨å‹¾é¸ç‹€æ…‹
                    setTimeout(() => {
                        completedItems.forEach(item => {
                            const entries = document.querySelectorAll('.item-entry');
                            entries.forEach(entry => {
                                const nameElement = entry.querySelector('.item-name');
                                const checkbox = entry.querySelector('.item-checkbox');
                                // åŒ¹é…å®Œæ•´çš„é …ç›®å­—ä¸²ä¾†æ¢å¾©å‹¾é¸ç‹€æ…‹
                                if (nameElement && nameElement.textContent === item) {
                                    checkbox.checked = true;
                                    entry.classList.add('completed');
                                }
                            });
                        });
                        updateStats(); // è¼‰å…¥é€²åº¦å¾Œæ›´æ–°çµ±è¨ˆæ•¸æ“š
                    }, 100); 
                }
            } catch (error) {
                console.error('ç„¡æ³•è¼‰å…¥é€²åº¦æˆ–è§£ææ•¸æ“š:', error);
                // å¦‚æœè¼‰å…¥å¤±æ•—ï¼Œæ¸…ç©ºå·²å®Œæˆçš„é …ç›®ä»¥é¿å…éŒ¯èª¤ç‹€æ…‹
                completedItems.clear();
                updateStats();
            }
        }

        // æœå°‹åŠŸèƒ½
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase().trim();
            
            const itemGroups = document.querySelectorAll('.item-group');
            
            if (searchTerm === '') {
                // å¦‚æœæœå°‹æ¡†ç‚ºç©ºï¼Œé¡¯ç¤ºæ‰€æœ‰é …ç›®å’Œçµ„
                itemGroups.forEach(group => {
                    group.style.display = 'block';
                    const itemEntries = group.querySelectorAll('.item-entry');
                    itemEntries.forEach(entry => {
                        entry.style.display = 'flex';
                    });
                });
                return;
            }
            
            itemGroups.forEach(group => {
                const itemEntries = group.querySelectorAll('.item-entry');
                let hasVisibleItems = false; // æ¨™è¨˜è©²çµ„æ˜¯å¦æœ‰å¯è¦‹é …ç›®
                
                itemEntries.forEach(entry => {
                    const itemNameElement = entry.querySelector('.item-name');
                    if (itemNameElement) {
                        // æœå°‹æ™‚å°ç…§ä¸­è‹±æ–‡åˆä½µçš„æ–‡å­—
                        const itemName = itemNameElement.textContent.toLowerCase(); 
                        
                        if (itemName.includes(searchTerm)) {
                            entry.style.display = 'flex';
                            hasVisibleItems = true;
                        } else {
                            entry.style.display = 'none';
                        }
                    }
                });
                
                // æ ¹æ“šçµ„å…§æ˜¯å¦æœ‰å¯è¦‹é …ç›®ä¾†æ±ºå®šæ˜¯å¦é¡¯ç¤ºè©²çµ„
                if (hasVisibleItems) {
                    group.style.display = 'block';
                } else {
                    group.style.display = 'none';
                }
            });
        });

        // é é¢è¼‰å…¥å®Œæˆæ™‚åŸ·è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            initializeItems(); // å…ˆåˆå§‹åŒ–æ‰€æœ‰é …ç›®
            loadProgress();    // å†è¼‰å…¥ä¸¦æ‡‰ç”¨å„²å­˜çš„é€²åº¦
        });
    </script>
</body>
</html>
